<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Holonet Channel Guide | Justin Cox</title>
    <meta name="description" content="Justin Cox — Writer Guy. Holonet channel guide with links to articles, books, newsletter, and socials." />
    <link rel="me" href="https://social.lol/@justincox" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="bg">
      <div class="bg-grid"></div>
      <div class="bg-scanlines"></div>
    </div>

    <main class="wrap">
      <header class="hero">
        <p class="eyebrow">Holonet Channel Guide</p>
        <h1>Justin Cox</h1>
        <p class="tagline">Writer Guy</p>
        <div class="meta">
          <span class="pill" data-node>Node: HN-77</span>
          <span class="pill" data-sector>Sector: Core</span>
          <span class="pill">Status: Online</span>
        </div>
      </header>

      <section class="panel dispatch" aria-live="polite">
        <div class="panel-header">
          <h2>Dispatches</h2>
          <p>Latest and featured transmissions from the field.</p>
        </div>
        <div class="dispatch-stack">
          <div class="dispatch-card" data-dispatch>
            <div class="dispatch-thumb" aria-hidden="true"></div>
            <div class="dispatch-body">
              <p class="dispatch-kicker">Loading latest transmission...</p>
              <h3 class="dispatch-title">Stand by</h3>
              <p class="dispatch-excerpt">Fetching the most recent Holonet update.</p>
            </div>
          </div>
          <div class="dispatch-card" data-featured-dispatch>
            <div class="dispatch-thumb no-image" aria-hidden="true"></div>
            <div class="dispatch-body">
              <p class="dispatch-kicker">Loading featured transmission...</p>
              <h3 class="dispatch-title">Stand by</h3>
              <p class="dispatch-excerpt">Searching the archive for a featured signal.</p>
            </div>
          </div>
        </div>
      </section>

      <section class="panel">
        <div class="panel-header">
          <h2>Outposts</h2>
          <p>Primary destinations across the system.</p>
        </div>
        <div class="link-grid">
          <a class="link-card" href="https://JustinCox.com" target="_blank" rel="noreferrer">
            <span class="link-title">Blog</span>
            <span class="link-sub">JustinCox.com</span>
          </a>
          <a class="link-card" href="https://justincox.com/book/" target="_blank" rel="noreferrer">
            <span class="link-title">Book</span>
            <span class="link-sub">Writing, impact, and purpose</span>
          </a>
          <a class="link-card" href="https://justincox.com/subscribe/" target="_blank" rel="noreferrer">
            <span class="link-title">Newsletter</span>
            <span class="link-sub">Weekly dispatches</span>
          </a>
        </div>
      </section>

      <section class="panel">
        <div class="panel-header">
          <h2>Relays</h2>
          <p>Social and broadcast channels.</p>
        </div>
        <div class="link-grid">
          <a class="link-card" href="https://justincox.com/mastodon/" target="_blank" rel="noreferrer">
            <span class="link-title">Mastodon</span>
            <span class="link-sub">Federated network</span>
          </a>
          <a class="link-card" href="https://instagram.com/justincox/" target="_blank" rel="noreferrer">
            <span class="link-title">Instagram</span>
            <span class="link-sub">Visual logbook</span>
          </a>
          <a class="link-card" href="https://www.linkedin.com/in/justin-cox-nonprofit-writer/" target="_blank" rel="noreferrer">
            <span class="link-title">LinkedIn</span>
            <span class="link-sub">Professional dossier</span>
          </a>
        </div>
      </section>

      <footer class="footer">
        <p class="footer-label">Transmission End</p>
        <p class="footer-copy">Holonet.nexus • curated by<a href="https://justincox.com/" target="_blank" rel="noreferrer">Justin Cox</a></p>
      </footer>
    </main>

    <script>
      (function () {
        var nodeEl = document.querySelector("[data-node]");
        var sectorEl = document.querySelector("[data-sector]");

        if (nodeEl) {
          var letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
          var pickLetter = function () {
            return letters[Math.floor(Math.random() * letters.length)];
          };
          var pickDigit = function () {
            return Math.floor(Math.random() * 10);
          };
          var formats = [
            function () {
              return "HN-" + pickDigit() + pickLetter() + pickDigit();
            },
            function () {
              return "HN-" + pickLetter() + pickDigit() + pickDigit();
            },
            function () {
              return "HN-" + pickDigit() + pickDigit() + pickLetter();
            },
            function () {
              return "HN-" + pickDigit() + pickDigit() + "-" + pickLetter() + pickDigit();
            },
            function () {
              return "HN-" + pickLetter() + "-" + pickDigit() + pickDigit() + pickDigit();
            }
          ];
          var nodeCode = formats[Math.floor(Math.random() * formats.length)]();
          nodeEl.textContent = "Node: " + nodeCode;
        }

        if (sectorEl) {
          var sectors = [
            "Core Worlds",
            "Colonies",
            "Inner Rim",
            "Mid Rim",
            "Outer Rim",
            "Expansion Region",
            "Unknown Regions"
          ];
          var pick = sectors[Math.floor(Math.random() * sectors.length)];
          sectorEl.textContent = "Sector: " + pick;
        }
      })();
    </script>

    <script>
      (function () {
        var latestDispatchEl = document.querySelector("[data-dispatch]");
        var featuredDispatchEl = document.querySelector("[data-featured-dispatch]");
        if (!latestDispatchEl && !featuredDispatchEl) return;

        var ghostRoot = "https://justincox.com";
        var apiKey = "b498ed50fad70b488f50a1fca0";
        var escapeHtml = function (value) {
          return String(value)
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;")
            .replace(/'/g, "&#39;");
        };

        var buildDispatchCard = function (post, kicker) {
          var title = post.title || "Transmission received";
          var excerpt = post.excerpt || "Open channel for full details.";
          var link = post.url || ghostRoot;
          var image = post.feature_image || "";

          return (
            '<a class="dispatch-link" href="' +
            escapeHtml(link) +
            '" target="_blank" rel="noreferrer">' +
            (image
              ? '<div class="dispatch-thumb" style="background-image:url(' +
                escapeHtml(image) +
                ')"></div>'
              : '<div class="dispatch-thumb no-image" aria-hidden="true"></div>') +
            '<div class="dispatch-body">' +
            '<p class="dispatch-kicker">' +
            escapeHtml(kicker) +
            "</p>" +
            '<h3 class="dispatch-title">' +
            escapeHtml(title) +
            "</h3>" +
            '<p class="dispatch-excerpt">' +
            escapeHtml(excerpt) +
            "</p>" +
            '<span class="dispatch-cta"><span class="dispatch-cta-text">Read Transmission</span></span>' +
            "</div>" +
            "</a>"
          );
        };

        var buildDispatchFallback = function (kicker, title, excerpt) {
          return (
            '<a class="dispatch-link" href="' +
            ghostRoot +
            '" target="_blank" rel="noreferrer">' +
            '<div class="dispatch-thumb no-image" aria-hidden="true"></div>' +
            '<div class="dispatch-body">' +
            '<p class="dispatch-kicker">' +
            escapeHtml(kicker) +
            "</p>" +
            '<h3 class="dispatch-title">' +
            escapeHtml(title) +
            "</h3>" +
            '<p class="dispatch-excerpt">' +
            escapeHtml(excerpt) +
            "</p>" +
            '<span class="dispatch-cta"><span class="dispatch-cta-text">Read Transmission</span></span>' +
            "</div>" +
            "</a>"
          );
        };

        if (latestDispatchEl) {
          var latestUrl =
            ghostRoot +
            "/ghost/api/content/posts/?key=" +
            apiKey +
            "&limit=1&include=tags" +
            "&fields=title,excerpt,feature_image,url,primary_tag" +
            "&filter=primary_tag:-[reviews,write-now]";

          fetch(latestUrl)
            .then(function (res) {
              if (!res.ok) throw new Error("Latest dispatch fetch failed");
              return res.json();
            })
            .then(function (data) {
              if (!data || !data.posts || !data.posts.length) throw new Error("No latest post found");
              latestDispatchEl.innerHTML = buildDispatchCard(data.posts[0], "Latest Transmission");
            })
            .catch(function () {
              latestDispatchEl.innerHTML = buildDispatchFallback(
                "Dispatch offline",
                "No signal detected",
                "Jump to the archive for previous transmissions."
              );
            });
        }

        if (featuredDispatchEl) {
          var featuredUrl =
            ghostRoot +
            "/ghost/api/content/posts/?key=" +
            apiKey +
            "&limit=12" +
            "&fields=title,excerpt,feature_image,url" +
            "&filter=tag:featured";

          fetch(featuredUrl)
            .then(function (res) {
              if (!res.ok) throw new Error("Featured dispatch fetch failed");
              return res.json();
            })
            .then(function (data) {
              if (!data || !data.posts || !data.posts.length) throw new Error("No featured posts found");
              var randomIndex = Math.floor(Math.random() * data.posts.length);
              featuredDispatchEl.innerHTML = buildDispatchCard(data.posts[randomIndex], "Featured Transmission");
            })
            .catch(function () {
              featuredDispatchEl.innerHTML = buildDispatchFallback(
                "Featured Transmission",
                "No featured signal detected",
                "Browse the archive for earlier transmissions."
              );
            });
        }
      })();
    </script>
  </body>
</html>
